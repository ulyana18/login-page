(this["webpackJsonpauthorize-app"]=this["webpackJsonpauthorize-app"]||[]).push([[0],{130:function(e,t,a){e.exports=a(176)},135:function(e,t,a){},137:function(e,t,a){},143:function(e,t,a){},172:function(e,t){},176:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(10),i=a.n(r),o=(a(135),a(17)),l=a.n(o),c=a(34),u=a(26),m=a(27),d=a(30),h=a(28),g=(a(137),a(109)),p=a(11),f=a(217),S=a(228),E=a(214),v=a(179),b=a(79),w=a(231),C=a(219),N=a(218),k=a(234),M=a(229),I=a(230),x=a(232),y=a(215);function T(e,t,a){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(l.a.mark((function e(t,a,s){var n,r,i,o,c=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>3&&void 0!==c[3]?c[3]:"",r="login"===t,e.prev=2,e.next=5,fetch("/api/user/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{name:n,email:a,password:s}})});case 5:return i=e.sent,e.next=8,i.json();case 8:if(o=e.sent,401!==i.status){e.next=15;break}return window.localStorage.removeItem("userName"),window.localStorage.removeItem("userEmail"),window.localStorage.removeItem("token"),window.localStorage.removeItem("refreshToken"),e.abrupt("return",!1);case 15:return window.localStorage.setItem("userName",o.user),window.localStorage.setItem("userEmail",o.email),window.localStorage.setItem("token",o.token),window.localStorage.setItem("refreshToken",o.refreshToken),e.abrupt("return",!0);case 22:e.prev=22,e.t0=e.catch(2),r?alert("Incorrect login or password"):alert("This email is already in use!");case 25:case"end":return e.stop()}}),e,null,[[2,22]])})))).apply(this,arguments)}function F(){return(F=Object(c.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{accessToken:window.localStorage.getItem("token"),name:window.localStorage.getItem("userName"),email:window.localStorage.getItem("userEmail"),refreshToken:window.localStorage.getItem("refreshToken")}})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,401!==t.status&&window.localStorage.setItem("token",a.accessToken),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("acces token died");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).logIn=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({isSpinning:!0}),e.next=3,T("login",s.emailInput,s.passwordInput);case 3:t=e.sent,setTimeout((function(){s.setState({isLoggedIn:t,isSpinning:!1})}),500),setTimeout((function(){s.props.updateState({isAuth:t})}),2500);case 6:case"end":return e.stop()}}),e)}))),s.detectAutofill=function(){try{var e=JSON.parse(s.emailRef.current.labels[0].dataset.shrink),t=JSON.parse(s.passwordRef.current.labels[0].dataset.shrink);e&&t&&s.setState({isDisabled:!1,isEmailEmpty:!1,isPasswordEmpty:!1})}catch(a){}},s.passwordCheck=function(e){s.passwordInput=e.target.value;var t=!/^(?!\s*$).+/.test(e.target.value);s.setState({isPasswordEmpty:t},(function(){s.checkSubmitDisable()}))},s.emailCheck=function(e){s.emailInput=e.target.value;var t=!/^(?!\s*$).+/.test(e.target.value);s.setState({isEmailEmpty:t},(function(){s.checkSubmitDisable()}))},s.checkSubmitDisable=function(){var e=!1===s.state.isPasswordEmpty&&!1===s.state.isEmailEmpty;s.setState({isDisabled:!e})},s.state={isDisabled:!0,isLoggedIn:null,isSpinning:!1,isEmailEmpty:null,isPasswordEmpty:null},s.emailInput="",s.passwordInput="",s.emailRef=n.a.createRef(),s.passwordRef=n.a.createRef(),s}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.emailRef.current.value&&this.passwordRef.current.value&&(this.setState({isEmailEmpty:!1,isPasswordEmpty:!1}),this.checkSubmitDisable()),window.addEventListener("load",this.detectAutofill)}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("form",{className:"login-form",noValidate:!0,autoComplete:"on"},n.a.createElement(k.a,{open:this.state.isLoggedIn,autoHideDuration:3e3,onClose:function(){return e.setState({isLoggedIn:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(x.a,{severity:"success"},"You are logged in!")),n.a.createElement(k.a,{open:!1===this.state.isLoggedIn,autoHideDuration:3e3,onClose:function(){return e.setState({isLoggedIn:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(x.a,{severity:"error"},"Incorrect login or password!")),n.a.createElement(M.a,{required:!0,id:"email",label:"Email",type:"email",inputRef:this.emailRef,onChange:this.emailCheck}),n.a.createElement(M.a,{required:!0,id:"password",label:"Password",type:"password",autoComplete:"current-password",inputRef:this.passwordRef,onChange:this.passwordCheck}),n.a.createElement(I.a,{m:2},n.a.createElement(E.a,{disabled:this.state.isDisabled,onClick:this.logIn,className:t.logInButton,variant:"outlined"},this.state.isSpinning&&n.a.createElement(y.a,{size:17}),!this.state.isSpinning&&n.a.createElement("span",null,"Log In"))))}}]),a}(s.Component),D=Object(v.a)((function(e){return{logInButton:{backgroundColor:"#FB9039",transition:"background-color 0.5s",marginTop:"30px","&.Mui-disabled":{backgroundColor:"rgba(255, 255, 255, 0.226)",color:"rgba(0, 0, 0, 0.473)"},"&:hover":{backgroundColor:"#fb903988"}}}}))(A),P=a(216),j=a(235),B=a(76),R=a.n(B),z=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).signUp=Object(c.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.nameValidate();case 2:return e.next=4,s.emailValidate();case 4:return e.next=6,s.passwordValidate();case 6:return e.next=8,s.confirmPasswordValidate();case 8:if(!0!==s.checkSubmitDisable()){e.next=18;break}return s.setState({isSpinning:!0,isFirstTime:!0}),e.next=13,T("signup",s.emailInput,s.passwordInput,s.nameInput);case 13:t=e.sent,setTimeout((function(){s.setState({isSignedUp:t,isSpinning:!1})}),500),setTimeout((function(){s.props.updateState({isAuth:t})}),2500),e.next=19;break;case 18:s.setState({isFirstTime:!1});case 19:case"end":return e.stop()}}),e)}))),s.nameValidate=function(){var e=/^[a-zA-Z]+$/.test(s.nameInput);s.setState({isNotCorrectName:!e},(function(){s.checkSubmitDisable()}))},s.emailValidate=function(){var e=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(s.emailInput);s.setState({isNotCorrectEmail:!e},(function(){s.checkSubmitDisable()}))},s.passwordValidate=function(){var e=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(s.passwordInput);s.setState({isNotCorrectPassword:!e},(function(){s.checkSubmitDisable()}))},s.confirmPasswordValidate=function(){var e=s.confirmPasswordInput===s.passwordInput;s.setState({isNotCorrectConfirmPassword:!e},(function(){s.checkSubmitDisable()}))},s.checkSubmitDisable=function(){var e=!1===s.state.isNotCorrectName&&!1===s.state.isNotCorrectEmail&&!1===s.state.isNotCorrectPassword&&!1===s.state.isNotCorrectConfirmPassword;return s.setState({isDisabled:!e}),e},s.nameCheck=function(e){if(s.nameInput=e.target.value,s.state.isFirstTime){var t=!s.regexpFirst.test(e.target.value);s.setState({isNotCorrectName:t},(function(){s.checkSubmitDisable()}))}else s.nameValidate()},s.emailCheck=function(e){if(s.emailInput=e.target.value,s.state.isFirstTime){var t=!s.regexpFirst.test(e.target.value);s.setState({isNotCorrectEmail:t},(function(){s.checkSubmitDisable()}))}else s.emailValidate()},s.passwordCheck=function(e){if(s.passwordInput=e.target.value,s.state.isFirstTime){var t=!s.regexpFirst.test(e.target.value);s.setState({isNotCorrectPassword:t},(function(){s.checkSubmitDisable()}))}else s.passwordValidate()},s.confirmPasswordCheck=function(e){if(s.confirmPasswordInput=e.target.value,s.state.isFirstTime){var t=!s.regexpFirst.test(e.target.value);s.setState({isNotCorrectConfirmPassword:t},(function(){s.checkSubmitDisable()}))}else s.confirmPasswordValidate()},s.state={isDisabled:!0,isSignedUp:null,isSpinning:!1,isFirstTime:!0,isNotCorrectName:null,isNotCorrectEmail:null,isNotCorrectPassword:null,isNotCorrectConfirmPassword:null},s.nameInput="",s.emailInput="",s.passwordInput="",s.confirmPasswordInput="",s.regexpFirst=/^(?!\s*$).+/,s}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("form",{className:"signup-form",noValidate:!0,autoComplete:"on"},n.a.createElement(k.a,{open:this.state.isSignedUp,autoHideDuration:3e3,onClose:function(){return e.setState({isSignedUp:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(x.a,{severity:"success"},"You are signed up!")),n.a.createElement(k.a,{open:!1===this.state.isSignedUp,autoHideDuration:3e3,onClose:function(){return e.setState({isSignedUp:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},n.a.createElement(x.a,{severity:"error"},"This email is already in use!")),n.a.createElement(M.a,{required:!0,error:this.state.isNotCorrectName&&!this.state.isFirstTime,id:"name",className:t.form,label:"Name",onChange:this.nameCheck,helperText:this.state.isNotCorrectName&&!this.state.isFirstTime&&"Use only alphabet characters"}),n.a.createElement(M.a,{required:!0,error:this.state.isNotCorrectEmail&&!this.state.isFirstTime,id:"email",label:"Email",type:"email",onChange:this.emailCheck,helperText:this.state.isNotCorrectEmail&&!this.state.isFirstTime&&"Incorrect email"}),n.a.createElement(M.a,{required:!0,error:this.state.isNotCorrectPassword&&!this.state.isFirstTime,id:"password",label:"Password",type:"password",autoComplete:"current-password",InputProps:{endAdornment:n.a.createElement(P.a,{position:"end"},n.a.createElement(j.a,{title:"Password must contain minimum 8 characters, at least 1 letter and 1 number"},n.a.createElement(R.a,null)))},onChange:this.passwordCheck,helperText:this.state.isNotCorrectPassword&&!this.state.isFirstTime&&"Password must contain minimum 8 characters, at least 1 letter and 1 number"}),n.a.createElement(M.a,{required:!0,error:this.state.isNotCorrectConfirmPassword&&!this.state.isFirstTime,id:"standard-password",label:"Confirm password",type:"password",InputProps:{endAdornment:n.a.createElement(P.a,{position:"end"},n.a.createElement(j.a,{title:"Password and confirm password must match"},n.a.createElement(R.a,null)))},onChange:this.confirmPasswordCheck,helperText:this.state.isNotCorrectConfirmPassword&&!this.state.isFirstTime&&"Password and confirm password don't match!"}),n.a.createElement(I.a,{m:2},n.a.createElement(E.a,{disabled:this.state.isDisabled,onClick:this.signUp,className:t.signUpButton,variant:"outlined",id:"signUpButton"},this.state.isSpinning&&n.a.createElement(y.a,{size:17}),!this.state.isSpinning&&n.a.createElement("span",null,"Sign Up"))))}}]),a}(s.Component),L=Object(v.a)((function(e){return{signUpButton:{backgroundColor:"#FB9039",transition:"background-color 0.5s",marginTop:"30px","&.Mui-disabled":{backgroundColor:"rgba(255, 255, 255, 0.226)",color:"rgba(0, 0, 0, 0.473)"},"&:hover":{backgroundColor:"#fb903988"}}}}))(z),U=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){var e=localStorage.getItem("tabPage");s.setState({tabPage:"1"===e?e:"2"})},s.handleChange=function(e,t){s.setState({tabPage:t}),localStorage.setItem("tabPage",t)},s.setAppState=function(e){var t=e.isAuth;s.props.updateState({isAuth:t})},s.state={tabPage:"2"},s}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.classes;return n.a.createElement("div",{className:"tabWrapper"},n.a.createElement(b.a,{className:e.tabContext,value:this.state.tabPage},n.a.createElement(f.a,{position:"static"},n.a.createElement(w.a,{onChange:this.handleChange,"aria-label":"simple tabs example"},n.a.createElement(N.a,{label:"Sign Up",value:"1"}),n.a.createElement(N.a,{label:"Log In",value:"2"}))),n.a.createElement(C.a,{value:"1"},n.a.createElement(L,{updateState:this.setAppState})),n.a.createElement(C.a,{value:"2"},n.a.createElement(D,{updateState:this.setAppState}))))}}]),a}(s.Component),V=Object(v.a)((function(e){return{tabContext:{borderRadius:"0",backgroundColor:"#1F3044"}}}))(U),W=a(110),H=a(67),J=(a(143),a(212)),$=a(111),q=a(237),Z=a(236),K=a(225),Y=a(226),G=a(220),_=a(221),Q=a(222),X=a(223),ee=a(224),te=a(227),ae=a(108),se=a.n(ae).a.connect("https://login-page-ulyana18.herokuapp.com"),ne=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).componentDidMount=function(){se.on("chat message",(function(e){var t=e.message,a=e.name,n=e.email;try{var r=s.state.chat,i=+r[r.length-1].messageid+1+"";s.setState({chat:[].concat(Object(W.a)(r),[{message:t,name:a,email:n,messageid:i}])},s.scrollToRef)}catch(o){}})),se.on("get database",(function(e){var t=e.sort((function(e,t){return+e.messageid>+t.messageid?1:+e.messageid<+t.messageid?-1:0}));s.setState({chat:t},s.scrollToRef)})),se.on("edit message",(function(e){var t=e.message,a=e.messageid;try{var n=Object.entries(s.messagesArea.current.childNodes).find((function(e){return e[1].dataset.id===a}));if(void 0!==n){var r=n[1].childNodes[0].childNodes;r[1].innerText=t,r[2].className="userEdited noselect"}}catch(i){}})),se.on("delete message",(function(e){var t=s.state.chat.filter((function(t){return t.messageid!==e}));s.setState({chat:t,editElement:null})})),se.emit("get database"),s.userEmail=localStorage.getItem("userEmail")},s.scrollToRef=function(){var e=s.messagesArea.current.getBoundingClientRect().height;s.messagesArea.current.parentElement.scrollTo(0,e),s.chatHeight=e},s.scrollWithButton=function(){var e=s.messagesArea.current.parentElement.scrollTop,t=s.scrollBtn.current.className;if(s.chatHeight-e>=1e3){var a=t.replace(" scrollBtn-hidden","");s.scrollBtn.current.className=a}else{t.split(" ").includes("scrollBtn-hidden")||(s.scrollBtn.current.className=t+" scrollBtn-hidden")}},s.onSearchButton=function(){s.setState({isSearchState:!0})},s.searchMessage=function(e){var t=e.target.value;if((s.clearFoundMessages(),t)&&(Object.entries(s.messagesArea.current.childNodes).map((function(e){e[1].childNodes[0].childNodes[1].innerText.includes(t)&&(s.foundMessages.push(e[1]),e[1].className+=" foundMessage")})),s.foundMessages.length)){var a=s.foundMessages[0].offsetTop;s.messagesArea.current.parentElement.scrollTo(0,a),s.setState({currentFoundMessage:s.foundMessages[0],currentFoundMessageIndex:0}),s.foundMessages[0].className+=" currentFoundMessage"}},s.changeCurrentFoundMessage=function(e){if(s.state.currentFoundMessage){var t=s.state.currentFoundMessage;t.className=t.className.replace("currentFoundMessage","");var a=s.state.currentFoundMessageIndex;switch(e){case"top":a--;break;case"bottom":a++}(a<0||a>=s.foundMessages.length)&&(a=a<0?s.foundMessages.length-1:0),t=s.foundMessages[a],s.setState({currentFoundMessage:t,currentFoundMessageIndex:a}),t.className+=" currentFoundMessage";var n=t.offsetTop;s.messagesArea.current.parentElement.scrollTo(0,n)}},s.onCloseSearchButton=function(){s.setState({isSearchState:!1}),s.clearFoundMessages()},s.clearFoundMessages=function(){if(s.state.currentFoundMessage){var e=s.state.currentFoundMessage;e.className=e.className.replace("currentFoundMessage","")}s.foundMessages.map((function(e){e.className=e.className.replace(" foundMessage","")})),s.foundMessages=[],s.setState({currentFoundMessage:null,currentFoundMessageIndex:0})},s.onMessageSubmit=function(){s.setState({isSend:!0});var e=s.chatInput.current.value,t=s.state.editElement;if(null!==s.state.editElement){if(e!==t.childNodes[1].innerText){var a=t.parentElement.dataset.id,n=e;se.emit("edit message",n,a)}}else se.emit("chat message",e,localStorage.getItem("userName"),localStorage.getItem("userEmail"));s.setState({message:"",editElement:null}),s.chatInput.current.value=""},s.showContextMenu=function(e){e.preventDefault(),e.stopPropagation(),s.state.isSelectionState||(e.target.className.split(" ").includes("message")&&s.setState({anchorEl:e.target},(function(){var e=s.state.anchorEl.className.includes("myMessage");s.setState({isMyMessage:e})})),e.target.parentElement.className.split(" ").includes("message")&&s.setState({anchorEl:e.target.parentElement},(function(){var e=s.state.anchorEl.className.includes("myMessage");s.setState({isMyMessage:e})})))},s.preventShowContextMenu=function(e){return e.preventDefault(),!1},s.handleContextMenuClose=function(){s.setState({anchorEl:null})},s.handleDialogClose=function(){s.setState({isDialogOpen:!1,editElement:null})},s.handleKeyDown=function(e){"Enter"===e.key&&""!==s.state.message&&s.onMessageSubmit()},s.changeInput=function(e){s.setState({message:e.target.value})},s.editMessage=function(){var e=s.state.anchorEl;s.handleContextMenuClose();var t=e.childNodes[1].innerText;setTimeout((function(){s.chatInput.current.focus()}),0),s.chatInput.current.value=t,s.setState({editElement:e,message:t})},s.showDeleteMessageDialog=function(){var e=s.state.anchorEl.parentElement;s.handleContextMenuClose(),s.setState({isDialogOpen:!0,editElement:e})},s.deleteMessage=function(){s.handleDialogClose(),se.emit("delete message",s.state.editElement.dataset.id)},s.copyText=function(){var e;e=""===window.getSelection().toString()?s.state.anchorEl.childNodes[1].innerText:window.getSelection().toString(),navigator.clipboard.writeText(e),s.handleContextMenuClose()},s.selectMessage=function(e){if(s.state.isSelectionState){if(e.target.className.split(" ").includes("message")){var t=e.target;s.isSelectedMessage(t)}if(e.target.parentElement.className.split(" ").includes("message")){var a=e.target.parentElement;s.isSelectedMessage(a)}var n=0===s.selectedElements.length;s.setState({isSelectionState:!n})}else s.setState({isSelectionState:!0}),s.state.anchorEl.className=s.state.anchorEl.className+" selectedMessage",s.selectedElements.push(s.state.anchorEl.parentElement),s.handleContextMenuClose()},s.isSelectedMessage=function(e){if(e.className.split(" ").includes("selectedMessage")){e.className=e.className.replace(" selectedMessage","");var t=s.selectedElements.filter((function(t){return t.dataset.id!==e.parentElement.dataset.id}));s.selectedElements=t}else e.className=e.className+" selectedMessage",s.selectedElements.push(e.parentElement)},s.deleteSelectedMessages=function(){s.selectedElements.map((function(e){var t=e.childNodes[0];t.className=t.className.replace(" selectedMessage","")})),s.selectedElements=[],s.setState({isSelectionState:!1})},s.state={chat:[],message:"",isSend:null,anchorEl:null,editElement:null,isDialogOpen:!1,isSearchState:!1,isScrolledToTop:!1,isSelectionState:!1,currentFoundMessage:null,currentFoundMessageIndex:0},s.userEmail="",s.chatHeight=0,s.isMyMessage=null,s.foundMessages=[],s.selectedElements=[],s.chatInput=n.a.createRef(),s.scrollBtn=n.a.createRef(),s.messagesArea=n.a.createRef(),s}return Object(m.a)(a,[{key:"renderChat",value:function(){var e=this;return this.state.chat.map((function(t,a){var s=t.message,r=t.name,i=t.email,o=t.messageid,l=t.is_edited;return n.a.createElement("div",{"data-id":o,className:i===localStorage.getItem("userEmail")?"messageWrapper messageWrapper-myMessage":"messageWrapper messageWrapper-otherMessage"},n.a.createElement("div",{className:i===localStorage.getItem("userEmail")?"myMessage message":"otherMessage message"},n.a.createElement("span",{className:"userName noselect"},r),n.a.createElement("span",{className:"userEmail",onContextMenu:e.preventShowContextMenu},s),n.a.createElement("span",{className:l?"userEdited noselect":"userNotEdited noselect"},"Edited")),n.a.createElement("div",{className:"messageAvatar"},n.a.createElement(G.a,null)))}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return n.a.createElement("div",{className:"chatWrapper"},n.a.createElement("div",{className:"chat"},n.a.createElement("div",{className:"chatHeader"},!this.state.isSelectionState&&n.a.createElement("span",null,"Group Chat"),!this.state.isSelectionState&&!this.state.isSearchState&&n.a.createElement(J.a,{className:"searchButton","aria-label":"search",onClick:this.onSearchButton},n.a.createElement(_.a,null)),this.state.isSearchState&&n.a.createElement("div",{className:"searchArea"},n.a.createElement("span",{className:"resultsCount"},this.foundMessages.length?this.state.currentFoundMessageIndex+1+" / "+this.foundMessages.length:"No results"),n.a.createElement(J.a,{className:t.arrowSearchButton,onClick:function(){return e.changeCurrentFoundMessage("top")}},n.a.createElement(Q.a,{className:t.arrowSearchIcon})),n.a.createElement(J.a,{className:t.arrowSearchButton,onClick:function(){return e.changeCurrentFoundMessage("bottom")}},n.a.createElement(X.a,{className:t.arrowSearchIcon})),n.a.createElement(M.a,{id:"outlined-basic",label:"Search...",onChange:this.searchMessage,autoFocus:!0}),n.a.createElement(J.a,{className:"closeSearchButton","aria-label":"close",onClick:this.onCloseSearchButton},n.a.createElement(ee.a,null))),this.state.isSelectionState&&n.a.createElement("div",{className:"selectionArea"},n.a.createElement("span",{className:"selectedElemsCount"},"Selected items: ",this.selectedElements.length," "),n.a.createElement(J.a,{"aria-label":"delete",onClick:this.deleteSelectedMessages},n.a.createElement(ee.a,null)))),n.a.createElement("div",{className:"messagesAreaWrapper",onScroll:this.scrollWithButton},n.a.createElement("div",{className:"messagesArea",ref:this.messagesArea,onContextMenu:this.showContextMenu,onClick:!!this.state.isSelectionState&&this.selectMessage,onLoad:this.scrollToRef},this.renderChat()),n.a.createElement(J.a,{buttonRef:this.scrollBtn,className:t.scrollButton,onClick:this.scrollToRef},n.a.createElement(X.a,null)),n.a.createElement($.a,{id:"simple-menu",anchorEl:this.state.anchorEl,keepMounted:!0,open:this.state.anchorEl&&!this.state.isSelectionState,onClose:this.handleContextMenuClose,anchorOrigin:{vertical:"bottom",horizontal:"right"}},n.a.createElement(q.a,{onClick:this.copyText},"Copy Text"),this.state.isMyMessage&&n.a.createElement(q.a,{onClick:this.editMessage},"Edit Message"),this.state.isMyMessage&&n.a.createElement(q.a,{onClick:this.showDeleteMessageDialog},"Delete Message"),n.a.createElement(q.a,{onClick:this.selectMessage},"Select Message")),n.a.createElement(Z.a,{className:t.dialog,open:this.state.isDialogOpen,onClose:this.handleDialogClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(K.a,{id:"alert-dialog-title"},"Are you sure you want to delete message?"),n.a.createElement(Y.a,null,n.a.createElement(E.a,{onClick:this.deleteMessage,color:"primary"},"Yes, delete"),n.a.createElement(E.a,{onClick:this.handleDialogClose,color:"primary",autoFocus:!0},"No")))),n.a.createElement("div",{className:"inputArea"},n.a.createElement(M.a,{id:"standard-full-width",className:t.messageInput,placeholder:"Write a message...",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},inputRef:this.chatInput,onKeyDown:this.handleKeyDown,onChange:this.changeInput}),""!==this.state.message&&n.a.createElement(J.a,{"aria-label":"send",className:t.sendButton,onClick:this.onMessageSubmit},n.a.createElement(te.a,null)))))}}]),a}(s.Component),re=Object(v.a)((function(e){var t;return{arrowSearchButton:{padding:"3px"},arrowSearchIcon:{height:"0.9em",width:"0.9em"},dialog:Object(H.a)({width:"25vw",margin:"0 auto",fontSize:"1rem"},"@media (max-width:1100px)",{width:"70vw",fontSize:"0.6rem"}),scrollButton:(t={position:"fixed",right:"24vw",bottom:"20vh",zIndex:"1000",backgroundColor:"#fff",transition:"all 150ms","&.scrollBtn-hidden":{visibility:"hidden"},"&:hover":{backgroundColor:"rgb(230, 230, 230)"}},Object(H.a)(t,"@media (max-width:780px)",{right:"13vw"}),Object(H.a)(t,"@media(max-width: 470px)",{right:"8vw",bottom:"18vh"}),t),messageInput:{backgroundColor:"#d9e3eb",color:"#000",width:"75%",margin:"15px 0",marginRight:"3%"},sendButton:{position:"absolute",right:"2%"}}}))(ne),ie=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var s;return Object(u.a)(this,a),(s=t.call(this,e)).checkToken=function(){return function(){return F.apply(this,arguments)}()},s.setAppState=function(){var e=Object(c.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.isAuth)?(s.setState({isAuth:JSON.parse(a)}),localStorage.setItem("isAuth",a)):s.logOut();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.logOut=function(){s.clearLocalStorage()},s.componentDidMount=function(){s.setState({isAuth:JSON.parse(localStorage.getItem("isAuth"))||!1}),window.addEventListener("storage",s.checkUser)},s.checkUser=function(){s.clearLocalStorage()},s.clearLocalStorage=function(){s.setState({isAuth:!1}),localStorage.removeItem("userName"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.setItem("isAuth",!1)},s.state={isAuth:!1},s}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.isAuth;return n.a.createElement("div",{className:"App"},n.a.createElement(f.a,{position:"static"},n.a.createElement(S.a,null,a&&n.a.createElement(E.a,{className:t.headerButton,variant:"contained",onClick:this.checkToken},"Refresh Access Token"),a&&n.a.createElement(E.a,{className:t.headerButton,color:"inherit",onClick:this.logOut},"Log out"))),n.a.createElement(g.a,null,this.state.isAuth?n.a.createElement(p.a,{to:"/chat"}):n.a.createElement(p.a,{to:"/signup"}),n.a.createElement(p.d,null,n.a.createElement(p.b,{path:"/signup",component:function(){return n.a.createElement(V,{updateState:e.setAppState})}}),n.a.createElement(p.b,{path:"/chat",component:function(){return n.a.createElement(re,{updateState:e.setAppState})}}))))}}]),a}(s.Component),oe=Object(v.a)((function(e){return{headerButton:{padding:"6px 16px",fontSize:"0.85rem",color:"rgba(0, 0, 0, 0.87)",backgroundColor:"#fb9039af","&:hover":{backgroundColor:"#f3984d8f"}}}}))(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.86654569.chunk.js.map