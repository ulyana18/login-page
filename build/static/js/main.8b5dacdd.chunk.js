(this["webpackJsonpauthorize-app"]=this["webpackJsonpauthorize-app"]||[]).push([[0],{83:function(e,t,a){e.exports=a(95)},88:function(e,t,a){},89:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(88),a(32)),c=a(33),l=a(39),u=a(38),d=(a(89),a(47)),m=a(26),p=a(69),h=a(68),g=a(127),f=a(134),w=a(51),v=a(11),b=a(19),C=a.n(b),S=a(30),E=a(34),k=a(138),I=a(132),y=a(136),N=a(128);function O(e,t,a){return j.apply(this,arguments)}function j(){return(j=Object(S.a)(C.a.mark((function e(t,a,n){var r,s,i,o,c=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>3&&void 0!==c[3]?c[3]:"",s="login"===t,e.prev=2,e.next=5,fetch("/api/user/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{name:r,email:a,password:n}})});case 5:return i=e.sent,e.next=8,i.json();case 8:if(o=e.sent,401!==i.status){e.next=12;break}return window.localStorage.clear(),e.abrupt("return",!1);case 12:return window.localStorage.setItem("userName",o.user),window.localStorage.setItem("userEmail",o.email),window.localStorage.setItem("token",o.token),window.localStorage.setItem("refreshToken",o.refreshToken),e.abrupt("return",!0);case 19:e.prev=19,e.t0=e.catch(2),s?alert("Incorrect login or password"):alert("This email is already in use!");case 22:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}function T(){return P.apply(this,arguments)}function P(){return(P=Object(S.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{accessToken:window.localStorage.getItem("token"),name:window.localStorage.getItem("userName"),email:window.localStorage.getItem("userEmail"),refreshToken:window.localStorage.getItem("refreshToken")}})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,401!==t.status&&window.localStorage.setItem("token",a.accessToken),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("acces token died");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).passwordCheck=function(e){n.passwordInput=e.target.value;var t=!/^(?!\s*$).+/.test(e.target.value);n.setState({isPasswordEmpty:t},(function(){this.checkSubmitDisable()}))},n.emailCheck=function(e){n.emailInput=e.target.value;var t=!/^(?!\s*$).+/.test(e.target.value);n.setState({isEmailEmpty:t},(function(){this.checkSubmitDisable()}))},n.checkSubmitDisable=function(){var e=!1===n.state.isPasswordEmpty&&!1===n.state.isEmailEmpty;n.setState({isDisabled:!e})},n.passwordInput="",n.emailInput="",n.state={isPasswordEmpty:null,isEmailEmpty:null,isDisabled:!0,isLoggedIn:null,isSpinning:!1},n.logIn=n.logIn.bind(Object(E.a)(n)),n}return Object(c.a)(a,[{key:"logIn",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,a=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isSpinning:!0}),e.next=3,O("login",this.emailInput,this.passwordInput);case 3:t=e.sent,setTimeout((function(){a.setState({isLoggedIn:t,isSpinning:!1})}),500);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"login-form",noValidate:!0,autoComplete:"off"},r.a.createElement(k.a,{open:this.state.isLoggedIn,autoHideDuration:3e3,onClose:function(){return e.setState({isLoggedIn:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(y.a,{variant:"outlined",severity:"success"},"You are logged in!")),r.a.createElement(k.a,{open:!1===this.state.isLoggedIn,autoHideDuration:3e3,onClose:function(){return e.setState({isLoggedIn:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(y.a,{variant:"outlined",severity:"error"},"Incorrect login or password!")),r.a.createElement(I.a,{required:!0,id:"standard-required",label:"Email",type:"email",onChange:this.emailCheck}),r.a.createElement(I.a,{required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:this.passwordCheck}),r.a.createElement(f.a,{m:2},r.a.createElement(g.a,{disabled:this.state.isDisabled,onClick:this.logIn,className:"logInBtn",variant:"contained"},this.state.isSpinning&&r.a.createElement(N.a,{size:20}),!this.state.isSpinning&&r.a.createElement("span",null,"Log In"))))}}]),a}(n.Component),D=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).nameValidate=function(e){var t=/^[a-zA-Z]+$/.test(e.target.value);n.nameInput=e.target.value,n.setState({isNotCorrectName:!t},(function(){this.checkSubmitDisable()}))},n.emailValidate=function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.target.value);n.emailInput=e.target.value,n.setState({isNotCorrectEmail:!t},(function(){this.checkSubmitDisable()}))},n.passwordValidate=function(e){var t=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(e.target.value);n.passwordInput=e.target.value,n.setState({isNotCorrectPassword:!t},(function(){this.checkSubmitDisable()}))},n.checkConfirmPassword=function(e){var t=e.target.value===n.passwordInput;n.setState({isNotCorrectConfirmPassword:!t},(function(){this.checkSubmitDisable()}))},n.checkSubmitDisable=function(){var e=!1===n.state.isNotCorrectName&&!1===n.state.isNotCorrectEmail&&!1===n.state.isNotCorrectPassword&&!1===n.state.isNotCorrectConfirmPassword;n.setState({isDisabled:!e})},n.nameInput="",n.passwordInput="",n.emailInput="",n.state={isNotCorrectName:null,isNotCorrectEmail:null,isNotCorrectPassword:null,isNotCorrectConfirmPassword:null,isDisabled:!0,isSignedUp:null,isSpinning:!1},n.signUp=n.signUp.bind(Object(E.a)(n)),n}return Object(c.a)(a,[{key:"signUp",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t,a=this;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isSpinning:!0}),e.next=3,O("signup",this.emailInput,this.passwordInput,this.nameInput);case 3:t=e.sent,setTimeout((function(){a.setState({isSignedUp:t,isSpinning:!1})}),500);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"signup-form",noValidate:!0,autoComplete:"off"},r.a.createElement(k.a,{open:this.state.isSignedUp,autoHideDuration:3e3,onClose:function(){return e.setState({isSignedUp:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(y.a,{variant:"outlined",severity:"success"},"You are signed up!")),r.a.createElement(k.a,{open:!1===this.state.isSignedUp,autoHideDuration:3e3,onClose:function(){return e.setState({isSignedUp:null})},anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(y.a,{variant:"outlined",severity:"error"},"This email is already in use!")),r.a.createElement(I.a,{required:!0,error:this.state.isNotCorrectName,id:"standard-required",label:"Name",onChange:this.nameValidate,helperText:!!this.state.isNotCorrectName&&"Use only alphabet characters"}),r.a.createElement(I.a,{required:!0,error:this.state.isNotCorrectEmail,id:"standard-required",label:"Email",type:"email",onChange:this.emailValidate,helperText:!!this.state.isNotCorrectEmail&&"Incorrect email"}),r.a.createElement(I.a,{required:!0,error:this.state.isNotCorrectPassword,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:this.passwordValidate,helperText:!!this.state.isNotCorrectPassword&&"Password must contain minimum eight characters, at least one letter and one number"}),r.a.createElement(I.a,{required:!0,error:this.state.isNotCorrectConfirmPassword,id:"standard-password-input",label:"Confirm password",type:"password",autoComplete:"current-password",onChange:this.checkConfirmPassword,helperText:!!this.state.isNotCorrectConfirmPassword&&"Password and confirm password don't match!"}),r.a.createElement(f.a,{m:2},r.a.createElement(g.a,{disabled:this.state.isDisabled,onClick:this.signUp,className:"signUpBtn",variant:"contained"},this.state.isSpinning&&r.a.createElement(N.a,{size:20}),!this.state.isSpinning&&r.a.createElement("span",null,"Sign Up"))))}}]),a}(n.Component),U=(n.Component,a(56)),z=a(135),q=a(131),L=a(129),V=a(130),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).checkToken=function(){return T()},n.state={value:"1"},n}return Object(c.a)(a,[{key:"handleChange",value:function(e,t){this.setState({value:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g.a,{className:"checkTokenBtn",variant:"contained",onClick:this.checkToken},"Refresh Access Token"),r.a.createElement("div",{className:"tabWrapper"},r.a.createElement(U.a,{style:"backgroundColor: #cbecec",value:this.state.value},r.a.createElement(L.a,{position:"static"},r.a.createElement(z.a,{onChange:this.handleChange.bind(this),"aria-label":"simple tabs example"},r.a.createElement(V.a,{label:"Sign Up",value:"1"}),r.a.createElement(V.a,{label:"Log In",value:"2"}))),r.a.createElement(q.a,{value:"1"},r.a.createElement(D,null)),r.a.createElement(q.a,{value:"2"},r.a.createElement(x,null)))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[83,1,2]]]);
//# sourceMappingURL=main.8b5dacdd.chunk.js.map