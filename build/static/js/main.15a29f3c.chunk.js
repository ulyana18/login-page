(this["webpackJsonpauthorize-app"]=this["webpackJsonpauthorize-app"]||[]).push([[0],{61:function(e,a,t){e.exports=t(73)},66:function(e,a,t){},67:function(e,a,t){},73:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(7),c=t.n(o),i=(t(66),t(17)),l=t(13),s=t(25),u=t(24),m=(t(67),t(103)),p=t(102),d=t(39),f=t(9),h=t(100),w=t(34),g=t.n(w),v=t(40);function E(){return(E=Object(v.a)(g.a.mark((function e(a,t,n){var r,o,c,i,l=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>3&&void 0!==l[3]?l[3]:"",o="login"===a,e.prev=2,e.next=5,fetch("/api/user/".concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{name:r,email:t,password:n}})});case 5:return c=e.sent,e.next=8,c.json();case 8:i=e.sent,window.localStorage.setItem("userName",i.user),window.localStorage.setItem("userEmail",i.email),window.localStorage.setItem("token",i.token),window.localStorage.setItem("refreshToken",i.refreshToken),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),o?alert("Incorrect login or password"):alert("This email is already in use!");case 18:case"end":return e.stop()}}),e,null,[[2,15]])})))).apply(this,arguments)}function k(){return(k=Object(v.a)(g.a.mark((function e(){var a,t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/check",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{accessToken:window.localStorage.getItem("token"),name:window.localStorage.getItem("userName"),email:window.localStorage.getItem("userEmail"),refreshToken:window.localStorage.getItem("refreshToken")}})});case 3:return a=e.sent,e.next=6,a.json();case 6:t=e.sent,window.localStorage.setItem("token",t.accessToken),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var b={callApi:function(e,a,t){return E.apply(this,arguments)},callApiCheckToken:function(){return k.apply(this,arguments)}},R=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).logIn=function(){return b("login",n.emailRef.current.value,n.passwordRef.current.value)},n.emailRef=r.a.createRef(),n.passwordRef=r.a.createRef(),n}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"login-container"},r.a.createElement("form",{className:"login-form",noValidate:!0,autoComplete:"off"},r.a.createElement(h.a,{required:!0,id:"standard-required",label:"Email",inputRef:this.emailRef}),r.a.createElement(h.a,{required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",inputRef:this.passwordRef}),r.a.createElement(p.a,{m:2},r.a.createElement(m.a,{onClick:this.logIn,className:"logInBtn",variant:"contained"},"Log In")))))}}]),t}(n.Component),j=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).signUp=function(){return b("signup",n.emailRef.current.value,n.passwordRef.current.value,n.nameRef.current.value)},n.emailRef=r.a.createRef(),n.passwordRef=r.a.createRef(),n.nameRef=r.a.createRef(),n}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"signup-container"},r.a.createElement("form",{className:"signup-form",noValidate:!0,autoComplete:"off"},r.a.createElement(h.a,{required:!0,id:"standard-required",label:"Name",inputRef:this.nameRef}),r.a.createElement(h.a,{required:!0,id:"standard-required",label:"Email",inputRef:this.emailRef}),r.a.createElement(h.a,{required:!0,id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",inputRef:this.passwordRef}),r.a.createElement(p.a,{m:2},r.a.createElement(m.a,{onClick:this.signUp,className:"signUpBtn",variant:"contained"},"Sign Up")))))}}]),t}(n.Component),y=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).checkToken=function(){return b()},e}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(p.a,{m:3},r.a.createElement(d.b,{to:"/signup"},r.a.createElement(m.a,{variant:"contained",className:"methodBtn"},"Sign Up")),r.a.createElement(d.b,{to:"/login"},r.a.createElement(m.a,{variant:"contained",className:"methodBtn"},"Log In")),r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/signup"},r.a.createElement(j,null)),r.a.createElement(f.a,{path:"/login"},r.a.createElement(R,null)))),r.a.createElement("button",{onClick:this.checkToken},"check access token"))}}]),t}(n.Component),O=function(e){Object(s.a)(t,e);var a=Object(u.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.15a29f3c.chunk.js.map